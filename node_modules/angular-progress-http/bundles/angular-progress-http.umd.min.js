!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/http")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/http"],e):e(t["angular-progress-http"]={},t.ng.core,t.ng.http)}(this,function(t,e,r){"use strict";function n(t,e,r){var n=t.create(null,null);return new p(t,e,r,n)}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(){function t(){}return t.prototype.create=function(t,e){return new r.Http(t,e)},t}();a.decorators=[{type:e.Injectable}],a.ctorParameters=function(){return[]};var s=new e.InjectionToken("Http implementation factory"),i=function(){function t(t,e,r){this.browserXhr=t,this.upload=e,this.download=r}return t.prototype.build=function(){var t=this.browserXhr.build();return this.upload&&t.upload.addEventListener("progress",this.createProgressListener(this.upload)),this.download&&t.addEventListener("progress",this.createProgressListener(this.download)),t},t.prototype.createProgressListener=function(t){return function(e){var r={event:e,lengthComputable:e.lengthComputable,loaded:e.loaded};e.lengthComputable&&(r.total=e.total,r.percentage=Math.round(100*e.loaded/e.total)),t(r)}},t}(),u=function(){function t(t){this.browserXhr=t}return t.prototype.create=function(t,e){return new i(this.browserXhr,t,e)},t}();u.decorators=[{type:e.Injectable}],u.ctorParameters=function(){return[{type:r.BrowserXhr}]};var c=function(){function t(t,e,r){this.responseOptions=t,this.xsrfStrategy=e,this.progressBrowserXhrFactory=r}return t.prototype.create=function(t,e){var n=this.progressBrowserXhrFactory.create(t,e);return new r.XHRBackend(n,this.responseOptions,this.xsrfStrategy)},t}();c.decorators=[{type:e.Injectable}],c.ctorParameters=function(){return[{type:r.ResponseOptions},{type:r.XSRFStrategy},{type:u}]};var p=function(t){function e(e,r,n,o){var a=t.call(this,null,r)||this;return a.xhrBackendFactory=e,a.requestOptions=r,a.httpFactory=n,a._uploadCallback=null,a._downloadCallback=null,a.http=n.create(o,r),a}return o(e,t),e.prototype.request=function(t,e){return this.http.request(t,e)},e.prototype.withDownloadProgressListener=function(t){return this._downloadCallback=t,this._buildProgressHttpInstance()},e.prototype.withUploadProgressListener=function(t){return this._uploadCallback=t,this._buildProgressHttpInstance()},e.prototype._buildProgressHttpInstance=function(){var t=new e(this.xhrBackendFactory,this.requestOptions,this.httpFactory,this._buildXHRBackend());return t._uploadCallback=this._uploadCallback,t._downloadCallback=this._downloadCallback,t},e.prototype._buildXHRBackend=function(){return this.xhrBackendFactory.create(this._uploadCallback,this._downloadCallback)},e}(r.Http);p.decorators=[{type:e.Injectable}],p.ctorParameters=function(){return[{type:c},{type:r.RequestOptions},{type:undefined,decorators:[{type:e.Inject,args:[s]}]},{type:r.ConnectionBackend}]};var l=function(){return function(){}}();l.decorators=[{type:e.NgModule,args:[{providers:[u,c,a,{provide:s,useExisting:a},{provide:p,useFactory:n,deps:[c,r.RequestOptions,s]}]}]}],l.ctorParameters=function(){return[]},t.AngularHttpFactory=a,t.HTTP_FACTORY=s,t.ProgressHttp=p,t.ProgressHttpModule=l,t.ɵa=n,t.ɵc=u,t.ɵb=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-progress-http.umd.min.js.map
