!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t((e.ng=e.ng||{},e.ng.ifMedia={}),e.ng.core)}(this,function(e,t){"use strict";var i=new t.InjectionToken("ng2-if-media.config"),n=function(){function e(e){this.breakpoints=e}return e.prototype.parseQuery=function(e){var t=this;return e.split(",").map(function(e){return t.parseSingleQuery(e)}).join(",")},e.prototype.parseSingleQuery=function(e){for(var t=[],i="",n=0,o=e.split(" and ");n<o.length;n++){var r=o[n],s="="===(r=r.trim())[1],a=r.replace(/^(<|>)?=?/,""),c=this.breakpoints[a];if(parseFloat(a))c={param:"width",value:a};else if(!c){t.push(r);continue}if("string"!=typeof c){var h=c.media;if(!i&&h&&(i=h),h&&h!==i)throw new Error("Clash of media property used for different breakpoints in "+c);var f=c.value,d=(c.param,f),p="",u=void 0;if("string"==typeof f){var l=c.value.match(/[a-zA-Z]+/),y=l&&l.index||f.length,m=f.slice(0,y);d=parseFloat(m),p=f.slice(y),m.includes(".")&&(u=1/Math.pow(10,y-m.indexOf(".")-1))}if(s?u=0:c.precision?u=c.precision:"px"===p?u=1:u||(u=.1),f)switch(r[0]){case"<":r="(max-"+c.param+": "+(d-u)+p+")";break;case">":r="(min-"+c.param+": "+(d+u)+p+")";break;default:r="("+c.param+": "+f+")"}else r="";var v=c.suffix;v&&(r=r?r+" and "+v:v),r&&t.push(r)}else t.push(c)}return(i?i+" and ":"")+t.join(" and ")},e}(),o=function(){function e(e,t){this.service=e,this.component=t}return e.prototype.when=function(e,t){this.createReflection(e,t,!0)},e.prototype.onChange=function(e,t){this.createReflection(e,t,!1)},e.prototype.createReflection=function(e,t,i){if("string"==typeof e)this.singleReflection(e,t,i);else{if("object"!=typeof e)throw new Error("Unsupported breakpoint parameter, please use a string or an object with breakpoints as keys.");this.objectReflection(e,i)}},e.prototype.objectReflection=function(e,t){void 0===t&&(t=!1),this.service.addObjectReflection(this,e,t)},e.prototype.singleReflection=function(e,t,i){void 0===i&&(i=!1),"function"==typeof t?this.service.addSingleReflection(this,{query:e,matchFn:t,onlyWhenMatched:i}):"object"==typeof t&&this.service.addSingleReflection(this,{query:e,newState:t,onlyWhenMatched:i})},e.prototype.deregister=function(){this.service.removeReflection(this)},e}(),r=function(){function e(e){this.elements=new Map,this.reflections=new Map,this.throttle=100,this.isThrottling=!1,this.resized=!1,this.throttle=e.throttle,this.parser=new n(e.breakpoints),"undefined"!=typeof window&&window.addEventListener("resize",this.onResize.bind(this))}return e.prototype.register=function(e){return new o({addSingleReflection:this.addSingleReflection.bind(this),addObjectReflection:this.addObjectReflection.bind(this),removeReflection:this.removeReflection.bind(this)},e)},e.prototype.isMedia=function(e){if("undefined"==typeof window)return!1;var t=this.parser.parseQuery(e);return window.matchMedia(t).matches},e.prototype.sendNotifications=function(){this.resolveReflections(),this.notifyElements()},e.prototype.throttledNotify=function(){var e=this;this.resized?(this.sendNotifications(),this.notifyTimeout=setTimeout(function(){e.throttledNotify()},this.throttle)):(clearTimeout(this.notifyTimeout),this.isThrottling=!1),this.resized=!1},e.prototype.onResize=function(){var e=this;this.resized=!0,this.isThrottling||(this.sendNotifications(),this.isThrottling=!0,setTimeout(function(){return e.throttledNotify()},this.throttle))},e.prototype.addSingleReflection=function(e,t){var i=t.query,n=void 0===i?"":i,o=t.matchFn,r=void 0===o?function(e){}:o,s=t.onlyWhenMatched,a=void 0!==s&&s,c=t.newState,h=void 0===c?null:c,f=this.reflections.get(e)||[],d=this.isMedia(n);this.reflections.set(e,f.concat({query:n,matchFn:r,matches:d,onlyWhenMatched:a,newState:h}));var p=!a||d;"function"==typeof r&&p&&r(d),h&&p&&this.mergeNewState(e.component,h)},e.prototype.addObjectReflection=function(e,t,i){void 0===i&&(i=!1);for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n],s=t[r];"function"==typeof s?this.addSingleReflection(e,{query:r,matchFn:s,onlyWhenMatched:i}):"object"==typeof s&&this.addSingleReflection(e,{query:r,newState:s,onlyWhenMatched:i})}},e.prototype.mergeNewState=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var o=n[i];e[o]=t[o]}},e.prototype.removeReflection=function(e){this.reflections.delete(e)},e.prototype.resolveReflections=function(){var e=this;this.reflections.forEach(function(t,i){for(var n=[],o=0,r=t;o<r.length;o++){var s=r[o],a=s.query,c=s.matchFn,h=s.matches,f=s.onlyWhenMatched,d=s.newState,p=e.isMedia(a);if(p!==h){var u=!1;f&&!h?u=!0:f||(u=!0),u&&(d?e.mergeNewState(i.component,d):c&&c(p)),n.push({query:a,matchFn:c,matches:p,onlyWhenMatched:f,newState:d})}else n.push({query:a,matchFn:c,matches:p,onlyWhenMatched:f,newState:d})}e.reflections.set(i,n)})},e.prototype.registerElement=function(e,t){this.elements.set(e,t),this.isMedia(t)?e.show():e.hide()},e.prototype.deregisterElement=function(e){this.elements.delete(e)},e.prototype.notifyElements=function(){var e=this;this.elements.forEach(function(t,i){e.isMedia(t)?i.show():i.hide()})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[i]}]}]},e}(),s=function(){function e(e,t,i){this.templateRef=e,this.viewContainer=t,this.mediaService=i,this.hidden=!0}return Object.defineProperty(e.prototype,"ngIfMedia",{set:function(e){this.media=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ifMedia",{set:function(e){this.media=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.mediaService.registerElement(this,this.media)},e.prototype.hide=function(){this.hidden||(this.viewContainer.clear(),this.hidden=!0)},e.prototype.show=function(){this.hidden&&(this.viewContainer.createEmbeddedView(this.templateRef),this.hidden=!1)},e.prototype.ngOnDestroy=function(){this.mediaService.deregisterElement(this)},e.decorators=[{type:t.Directive,args:[{selector:"[ifMedia], [ngIfMedia]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:r}]},e.propDecorators={ngIfMedia:[{type:t.Input}],ifMedia:[{type:t.Input}]},e}(),a={throttle:100,breakpoints:{}},c={bootstrap:{xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"}},h=a,f=function(){function e(){}return e.withConfig=function(e){var t=function(e,t){if(c[t])return Object.assign(e,c[t]);throw new Error("No breakpoints found for vendor '"+t+"'. Check your IfMedia import config.")},n=e.breakpoints,o=void 0===n?{}:n,r=e.vendorBreakpoints,s=void 0===r?[]:r;return Array.isArray(s)?e.breakpoints=s.reduce(t,{}):e.breakpoints=t({},s),e.breakpoints=Object.assign(e.breakpoints,o),{ngModule:this,providers:[{provide:i,useValue:Object.assign(a,e)}]}},e.decorators=[{type:t.NgModule,args:[{imports:[],providers:[r,{provide:i,useValue:h}],declarations:[s],exports:[s]}]}],e.ctorParameters=function(){return[]},e}();e.IfMediaModule=f,e.IfMediaService=r,e.IfMediaDirective=s,Object.defineProperty(e,"__esModule",{value:!0})});